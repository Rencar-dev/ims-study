# 팩토리 패턴

## Simple Factory

- 객체 생성 부분을 클래스로 분리해서 실행.
- 관용구에 가깝지 패턱은 아님.

## 팩토리 메소드 패턴

### 정의

- 객체를 생성할 때 필요한 인터페이스를 만들고 어떤 클래스의 인스턴스를 만들지는 **서브 클래스**에서 결정.
  - 생산자 클래스가 실제 생산될 제품을 전혀 모르는 상태로 만들어진다. -> **사용하는 서브 클래스에 따라 생산되는 객체 인스턴스가 결정.**

### 구조

- 생산자(Creator) 클래스
  - 추상 생산자 클래스. 나중에 서브 클래스에서 제품(객체)을 생산하려고 구현하는 팩토리 메소드(추상 메소드)를 정의.
  - 생산자 자체는 어떤 구상 제품 클래스가 만들어질지 미리 알 수 없음.
- 제품(Product) 클래스
  - 팩토리 생산되는 제품.
  - 제품 클래스는 모두 똑같은 인터페이스를 구현해야함. 제품을 사용할 클래스에서 구상 클래스가 아닌 인터페이스의 레퍼런스로 객체를 참조할 수가 있음.
    - 미리 어떤 제품 클래스가 생성되는지 알 수 없음.

### 디자인 원칙

- 의존성 뒤집기 원칙(Dependency Inversion Principle)
  - 추상화된 것에 의존하게 만들고 구상 클래스에 의존하지 않게 만든다.
- 지키는 방법
  - 변수에 구상 클래스의 레퍼런스를 저장하지 말기.
  - 구상 클래스에서 유도된 클래스를 만들지 말기.
  - 베이스 클래스에 이미 구현되어 있는 메소드를 오버라디으 하지 말기.
- 완벽하게 지킬 수 없음.
  - 합리적인 이유로 불가피하 상황에만 예외로 두기.

## 추상 팩토리 패턴

### 정의

- 구상 클래스에 의존하지 않고도 서로 연관되거나 의존적인 객체로 이루어진 **제품군**을 생산하는 인터페이스를 제공.
  - 구상 클래스는 서브 클래스에서 생성.
  - 인터페이스에는 제품을 생성할 대의 필요한 메소드들이 정의도어 있음.

### 구조

- `AbstractFactory`
  - 모든 구상 팩토리에서 구현해야하는 인터페이스.
  - 제품을 생산할 때 일련의 메소드가 정의되어 있음.
- `ConcreteFactory`
  - 서로 다른 제품군을 구현.
  - 클라이언트에서는 필요한 `ConcreteFactory`를 사용하면 되기 때문에 제품 객체의 인스턴스를 직접 만들 필요가 없어짐.

## 팩토리 메서드 패턴 vs 추상 팩토리 패턴

- 팩토리 메서드 패턴
  - 한 제품을 생산하는 데 필요한 추상 인터페이스를 제공.
- 추상 팩토리 패턴
  - 제품군을 생산하는 추상 인터페이스를 제공.
