# 상태 패턴

## 정의

- 객체의 내부 상태가 바뀜에 따라 객체의 행동을 바꿀 수 있음.
- 마치 객체의 클래스가 바뀌는 것과 같은 결과를 얻을 수 있음.

## 구조

- `Context`
  - 여러가지 내부 상태가 들어있을 수 있음.
  - `request()`
    - 호출되면 상태 객체에게 맡겨짐.
    - `state.handle()`
- `State`
  - 모든 구상 상태 클래스의 공통 인터페이스를 정의.
  - 모든 상태 클래스에서 같은 인터페이스를 구현하므로 바꿔 가면서 쓸 수 있음.
- `ConcreateState`
  - 구상 상태 클래스는 원하는 만큼 만들 수 있음.
  - `handle()`
  - `Context`로 부터 전달된 요청을 자기 상태에 맞게 처리함.
  - `Context`에서 상태를 바꾸면 행동도 바뀌게 된다.

## 전략패턴과의 차이

- 구조만 보면 전략패턴과 같음.
- 용도가 다름.
- 전략 패턴은 실행 시에 전략 객체를 변경할 수 있는 유연성을 제공하는 용도로 사용. (유연성 극대화)
- 클라이언트가 `Context` 객체에게 어떤 전략 객체를 사용할지를 지정.
- 상태패턴은 상태 겍체의 일련의 행동이 캡슐화, 상황에 따라 `Context` 객체에서 여러 상태 객체 중 한 객체에게 모든 행동을 맡김.
- 클라이언트는 상태 객체를 몰라도 됨.
- 수 많은 조건문 대신에 상태 패턴을 사용.
- 결론
  - 전략 패턴: 실행시에 여러 알고리즘에서 원하는 알고리즘을 선택할 때 고려.
  - 상태 패턴: 다양한 상태 변화가 있는 복잡한 로직일 때 고려.
